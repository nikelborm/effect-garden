# apache-superset-quick-init

[![Open in VS Code](https://img.shields.io/static/v1?logo=visualstudiocode&label=&message=Open%20in%20VS%20Code&labelColor=2c2c32&color=007acc&logoColor=007acc)](https://github.dev/nikelborm/apache-superset-quick-init)
[![NPM package version](https://badge.fury.io/js/apache-superset-quick-init.svg)](https://www.npmjs.com/package/apache-superset-quick-init)
[![NPM downloads](https://img.shields.io/npm/dm/apache-superset-quick-init.svg?style=flat)](https://npmjs.org/package/apache-superset-quick-init)
[![NPM Last Update](https://img.shields.io/npm/last-update/apache-superset-quick-init)](https://npmjs.org/package/apache-superset-quick-init)
[![package.json Dependents count](https://badgen.net/npm/dependents/apache-superset-quick-init)](https://www.npmjs.com/package/apache-superset-quick-init?activeTab=dependents)
[![JSR package version](https://jsr.io/badges/@nikelborm/apache-superset-quick-init)](https://jsr.io/@nikelborm/apache-superset-quick-init)
[![JSR package Score](https://jsr.io/badges/@nikelborm/apache-superset-quick-init/score)](https://jsr.io/@nikelborm/apache-superset-quick-init)
[![JSR package owner](https://jsr.io/badges/@nikelborm)](https://jsr.io/@nikelborm)
[![GitHub commits per month](https://img.shields.io/github/commit-activity/m/nikelborm/apache-superset-quick-init)](https://github.com/nikelborm/apache-superset-quick-init/pulse)
[![GitHub Total commits Count](https://img.shields.io/github/commit-activity/t/nikelborm/apache-superset-quick-init)](https://github.com/nikelborm/apache-superset-quick-init/graphs/commit-activity)
[![NPM License](https://img.shields.io/npm/l/apache-superset-quick-init)](https://github.com/nikelborm/apache-superset-quick-init?tab=MIT-1-ov-file)
[![Coveralls Coverage Percentage](https://coveralls.io/repos/github/nikelborm/apache-superset-quick-init/badge.svg?branch=main&rand=9148876)](https://coveralls.io/github/nikelborm/apache-superset-quick-init?branch=main)
[![CodeFactor Code quality Grade](https://img.shields.io/codefactor/grade/github/nikelborm/apache-superset-quick-init?label=codefactor)](https://www.codefactor.io/repository/github/nikelborm/apache-superset-quick-init)
[![GitHub Tests Workflow status](https://github.com/nikelborm/apache-superset-quick-init/actions/workflows/test.yml/badge.svg)](https://github.com/nikelborm/apache-superset-quick-init/actions/workflows/test.yml)
[![GitHub Release Workflow status](https://github.com/nikelborm/apache-superset-quick-init/actions/workflows/release.yml/badge.svg)](https://github.com/nikelborm/apache-superset-quick-init/actions/workflows/release.yml)
[![Sonar Quality Gate Status](https://sonarcloud.io/api/project_badges/measure?project=nikelborm_apache-superset-quick-init&metric=alert_status)](https://sonarcloud.io/summary/new_code?id=nikelborm_apache-superset-quick-init)
[![Sonar Bugs Count](https://sonarcloud.io/api/project_badges/measure?project=nikelborm_apache-superset-quick-init&metric=bugs)](https://sonarcloud.io/summary/new_code?id=nikelborm_apache-superset-quick-init)
[![Sonar Code Smells Count](https://sonarcloud.io/api/project_badges/measure?project=nikelborm_apache-superset-quick-init&metric=code_smells)](https://sonarcloud.io/summary/new_code?id=nikelborm_apache-superset-quick-init)
[![Sonar Duplicated Lines (%)](https://sonarcloud.io/api/project_badges/measure?project=nikelborm_apache-superset-quick-init&metric=duplicated_lines_density)](https://sonarcloud.io/summary/new_code?id=nikelborm_apache-superset-quick-init)
[![Sonar Lines of Code Count](https://sonarcloud.io/api/project_badges/measure?project=nikelborm_apache-superset-quick-init&metric=ncloc)](https://sonarcloud.io/summary/new_code?id=nikelborm_apache-superset-quick-init)
[![Sonar Reliability Grade](https://sonarcloud.io/api/project_badges/measure?project=nikelborm_apache-superset-quick-init&metric=reliability_rating)](https://sonarcloud.io/summary/new_code?id=nikelborm_apache-superset-quick-init)
[![Sonar Security Grade](https://sonarcloud.io/api/project_badges/measure?project=nikelborm_apache-superset-quick-init&metric=security_rating)](https://sonarcloud.io/summary/new_code?id=nikelborm_apache-superset-quick-init)
[![Sonar Technical Debt Count](https://sonarcloud.io/api/project_badges/measure?project=nikelborm_apache-superset-quick-init&metric=sqale_index)](https://sonarcloud.io/summary/new_code?id=nikelborm_apache-superset-quick-init)
[![Sonar Maintainability Grade](https://sonarcloud.io/api/project_badges/measure?project=nikelborm_apache-superset-quick-init&metric=sqale_rating)](https://sonarcloud.io/summary/new_code?id=nikelborm_apache-superset-quick-init)
[![Sonar Vulnerabilities Count](https://sonarcloud.io/api/project_badges/measure?project=nikelborm_apache-superset-quick-init&metric=vulnerabilities)](https://sonarcloud.io/summary/new_code?id=nikelborm_apache-superset-quick-init)
![OSS Lifecycle status](https://img.shields.io/osslifecycle?file_url=https%3A%2F%2Fgithub.com%2Fnikelborm%2Fapache-superset-quick-init%2Fblob%2Fmain%2FOSSMETADATA)

<!-- Commented because it seems like codeclimate was acquired and no longer accepts new opensource repos -->
<!-- [![Code Climate Technical Debt](https://img.shields.io/codeclimate/tech-debt/nikelborm/apache-superset-quick-init)](https://codeclimate.com/github/nikelborm/apache-superset-quick-init/issues) -->
<!-- [![Code Climate Issues](https://img.shields.io/codeclimate/issues/nikelborm/apache-superset-quick-init)](https://codeclimate.com/github/nikelborm/apache-superset-quick-init/issues) -->

<!-- Commented because there's some bug in effect library or in bundlephobia that prevents proper rendering of this badge -->
<!-- [![npm minzipped bundle size](https://img.shields.io/bundlephobia/minzip/apache-superset-quick-init)](https://bundlephobia.com/package/apache-superset-quick-init) -->
<!-- [![package.json Dependencies count](https://badgen.net/bundlephobia/dependency-count/apache-superset-quick-init)](https://www.npmjs.com/package/apache-superset-quick-init?activeTab=dependencies) -->

<!-- commented because it seems that npms.io was acquired by somebody and is slowly dying -->
<!-- [![npms.io](https://img.shields.io/npms-io/final-score/apache-superset-quick-init)](update_link_later) -->

<!-- commented because I haven't started following it yet -->
<!-- [![Conventional Commits](https://img.shields.io/badge/Conventional%20Commits-1.0.0-yellow.svg)](https://conventionalcommits.org) -->

<sup>(Don't judge me for my obsession with badges)</sup>

## What's this?

It's a script I wrote to quickly setup Superset installation anywhere.

The script automatically adds a new docker network with a known name
(`apache_superset_network`) for easier integration with other Docker Compose
projects, generates random credentials for services, enables Superset production
mode and configures proper support for PostgreSQL.

## Dependencies

1. Latest Node.js to run the script. You can install it easily via [mise](https://github.com/jdx/mise)
2. Docker Compose to launch Superset

## How to use

```bash
npx apache-superset-quick-init
# or if you prefer to skip loading useless stuff, you can load bundled and
# minified version of the script, which would be much faster for single-shot execution
pkg=apache-superset-quick-init && curl -sL https://github.com/nikelborm/$pkg/releases/latest/download/$pkg.js | node

cd ./superset

# Choose the tag you want: 'latest' or something specific like '4.1.1'
# here are examples of tags:
# https://superset.apache.org/docs/installation/docker-builds/#key-tags-examples
# https://github.com/apache/superset/blob/master/CHANGELOG.md
# https://github.com/apache/superset/releases

export TAG='latest'
# If you chose `latest`, it's a good idea to always pull
# docker compose up -d --pull always
docker compose up -d
# Follow logs until completely deployed
docker compose logs -f
```

Also it's recommended to add this string to your .bashrc, if you want faster CLIs written in JS

```bash
export NODE_COMPILE_CACHE=~/.cache/nodejs-compile-cache
```

## TODO

1. Dynamically patch package.json during release, so that JSR version of
   apache-superset-quick-init will depend on JSR version of @nikelborm/git-dl
2. Create a separate script for quick registering of a new database into a newly
   created Superset instance
